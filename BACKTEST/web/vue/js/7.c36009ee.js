(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"8e5a":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"text-h4 q-mb-md"},[t._v("Import data")]),a("div",{staticClass:"subheading"},[t._v("The importer can download historical market data directly from the exchange.")]),a("div",{staticClass:"row justify-center q-pa-md"},[a("q-btn",{attrs:{color:"blue-grey-7",label:"Start Import"},on:{click:function(e){return e.preventDefault(),t.run(e)}}})],1),a("div",[a("q-tabs",{staticClass:"text-grey",attrs:{"active-color":"blue-grey","indicator-color":"blue-grey"},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("q-tab",{attrs:{icon:"av_timer",name:"running-imports",label:"Running imports"}}),a("q-tab",{attrs:{icon:"add",name:"start-new",label:"Start new import"}})],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("q-tab-panel",{attrs:{name:"running-imports"}},[a("div",{staticClass:"row justify-center"},[0===t.imports.length?a("q-banner",{staticClass:"bg-warning",attrs:{icon:"warning"}},[t._v("\n            You currently don't have any imports running.\n          ")]):t._e(),t._l(t.imports,(function(e){return a("q-card",{key:e.id,staticClass:"col-lg-1 col-md-12 text-center q-mr-md q-mt-sm"},[a("q-card-section",{staticClass:"bg-teal-2"},[a("div",{staticClass:"text-h6 text-uppercase"},[t._v("\n                "+t._s(e.watch.currency)+"-"+t._s(e.watch.asset)+"\n              ")]),a("div",{staticClass:"text-subtitle-2"},[t._v("\n                "+t._s(e.watch.exchange)+"\n              ")])]),a("q-separator"),a("q-card-section",[a("q-circular-progress",{staticClass:"q-ma-md",class:{"text-teal":!e.done,"text-positive":e.done},attrs:{min:0,max:100,thickness:.2,size:"102px","show-value":"",value:+t.progress(e)}},[e.done?a("q-icon",{attrs:{size:"64px",color:"positive",name:"done"}}):t._e(),e.done?t._e():a("span",{staticClass:"text-h6"},[t._v(t._s(+t.progress(e))+" %")])],1)],1),a("q-separator"),a("q-card-actions",{attrs:{align:"center"}},[a("q-btn",{attrs:{color:"teal",flat:""},on:{click:function(a){return t.$router.push("/data/importer/import/"+e.id)}}},[t._v("\n                open import\n              ")])],1)],1)}))],2)]),a("q-tab-panel",{attrs:{name:"start-new"}},[a("import-config-builder",{on:{config:t.updateConfig}})],1)],1)],1)])},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-around items-top"},[a("market-picker",{staticClass:"col-3",attrs:{"only-importable":!0},on:{market:t.updateMarketConfig}}),a("range-creator",{staticClass:"col-3",on:{range:t.updateRange}})],1)},i=[],o=(a("f751"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"q-mr-md"},[a("q-card-section",{staticClass:"bg-blue-grey-8 text-white"},[a("div",{staticClass:"text-h6"},[t._v("Market")])]),a("q-separator"),a("q-card-section",[a("exchange-picker",{attrs:{onlyTradable:t.onlyTradable,onlyImportable:t.onlyImportable},on:{exchange:function(e){return t.setExchange(e)}}})],1),a("q-separator"),a("q-card-section",[a("q-select",{attrs:{label:"Currency",hint:"Pick a currency as base",options:t.currencies,"map-options":"","emit-value":""},model:{value:t.currency,callback:function(e){t.currency=e},expression:"currency"}})],1),a("q-separator"),a("q-card-section",[a("q-select",{attrs:{label:"Asset",hint:"Pick an asset",options:t.assets,"map-options":"","emit-value":""},model:{value:t.asset,callback:function(e){t.asset=e},expression:"asset"}})],1)],1)}),c=[],l=(a("ac6a"),a("cadf"),a("06db"),a("2ef0")),u=a.n(l),m=a("be78"),h={props:["onlyTradable","onlyImportable"],components:{exchangePicker:m["a"]},data:function(){return{exchange:"binance",currency:"BTC",asset:"NEO"}},created:function(){this.emitConfig()},computed:{exchanges:function(){var t=Object.assign({},this.$store.state.config.exchanges);return!u.a.isEmpty(t)&&(this.onlyTradable&&u.a.each(t,(function(e,a){e.tradable||delete t[a]})),this.onlyImportable&&u.a.each(t,(function(e,a){e.importable||delete t[a]})),t)},markets:function(){return this.exchanges?this.exchanges[this.exchange]:null},assets:function(){var t=this.exchanges?this.exchanges[this.exchange].markets[this.currency]:[];return t&&(t=u.a.orderBy(u.a.map(t,(function(t){return{value:t,label:t}})),["label"],["asc"]),t.length&&(this.asset=t[0].value)),t},currencies:function(){var t=this.exchanges?u.a.keys(this.exchanges[this.exchange].markets):[];return t&&(t=u.a.orderBy(u.a.map(t,(function(t){return{value:t,label:t}})),["label"],["asc"]),t.length&&(this.currency=t[0].value)),t},watchConfig:function(){return{watch:{exchange:this.exchange,currency:this.currency,asset:this.asset}}}},watch:{currency:function(){this.emitConfig()},asset:function(){this.emitConfig()},market:function(){this.emitConfig()},exchanges:function(){this.emitConfig()},exchange:function(){this.emitConfig()}},methods:{setExchange:function(t){this.exchange=t},emitConfig:function(){this.$emit("market",this.watchConfig)}}},f=h,d=a("2877"),p=Object(d["a"])(f,o,c,!1,null,null,null),g=p.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"q-ma-sm"},[a("q-card-section",{staticClass:"bg-blue-grey-8 text-white"},[a("div",{staticClass:"text-h6"},[t._v("Daterange")])]),a("q-separator"),a("q-card-section",[a("q-input",{attrs:{filled:"",dense:"",label:"From",hint:"Pick a start date and time"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}})],1)],1)]},proxy:!0}]),model:{value:t.from,callback:function(e){t.from=e},expression:"from"}})],1),a("q-separator"),a("q-card-section",[a("q-input",{attrs:{filled:"",dense:"",label:"To",hint:"Pick an end date and time"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"YYYY-MM-DD HH:mm"},model:{value:t.to,callback:function(e){t.to=e},expression:"to"}})],1)],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{mask:"YYYY-MM-DD HH:mm",format24h:""},model:{value:t.to,callback:function(e){t.to=e},expression:"to"}})],1)],1)]},proxy:!0}]),model:{value:t.to,callback:function(e){t.to=e},expression:"to"}})],1)],1)},b=[],y=a("c1df"),v=a.n(y),q={data:function(){return{from:"",to:""}},created:function(){var t=v()().startOf("minute"),e=t.clone().subtract(3,"months");this.to=this.fmt(t),this.from=this.fmt(e),this.emitRange()},methods:{fmtTs:function(t){return v.a.unix(t).utc()},fmt:function(t){return t.utc().format("YYYY-MM-DD HH:mm")},emitRange:function(){this.$emit("range",{from:this.fmtTs(this.from),to:this.fmtTs(this.to)})},emitManualEntry:function(){if(this.from.length<"4"||this.from.length<"4")return this.$emit("range",{});var t=v.a.utc(this.from),e=v.a.utc(this.to);t.isValid()&&e.isValid()?this.$emit("range",{from:this.fmt(t),to:this.fmt(e)}):this.$emit("range",{})}},watch:{from:function(){this.emitManualEntry()},to:function(){this.emitManualEntry()},config:function(){this.scanned=!1},tab:function(){this.scanned=!1,this.$emit("range",{})},selectedRangeIndex:function(){var t=this.ranges[this.selectedRangeIndex];t&&this.emitRange(t)}}},k=q,C=Object(d["a"])(k,x,b,!1,null,null,null),w=C.exports,_={data:function(){return{market:{},range:{}}},components:{marketPicker:g,rangeCreator:w},computed:{config:function(){var t={};return Object.assign(t,this.market,{importer:{daterange:this.range}},{candleWriter:{enabled:!0}}),t}},methods:{updateMarketConfig:function(t){this.market=t,this.emitConfig()},updateRange:function(t){this.range=t,this.emitConfig()},emitConfig:function(){this.$emit("config",this.config)}}},$=_,Y=Object(d["a"])($,r,i,!1,null,null,null),E=Y.exports,T=a("af47"),M={methods:{startImport:function(t){return this.$axios.post(T["a"]+"import",t)}}},I=M,H={mixins:[I],components:{importConfigBuilder:E},data:function(){return{config:{},currentTab:"running-imports"}},mounted:function(){this.imports.length||(this.currentTab="start-new")},computed:{imports:function(){return this.$store.state.imports.imports}},methods:{progress:function(t){if(t){if(t.done)return 100;var e=v.a.utc(t.to).diff(v.a.utc(t.from))-v.a.utc(t.to).diff(v.a.utc(t.latest)),a=100*e;return a/=v.a.utc(t.to).diff(v.a.utc(t.from)),!!a&&+a.toFixed(2)}},daysApart:function(t){var e=v()(t.to),a=v()(t.from);return e.diff(a,"days")},updateConfig:function(t){this.config=t},run:function(){var t=this,e=this.daysApart(this.config.importer.daterange);if(e<1)this.$q.dialog({title:"Error",message:"You can only import at least one day of data."});else{var a=this.$store.state.config.exchanges[this.config.watch.exchange];"exchangeMaxHistoryAge"in a&&v()(this.config.importer.daterange.from)<v()().subtract(a.exchangeMaxHistoryAge,"days")?this.$q.dialog({title:"Error",message:"Your date from is too old for "+this.config.watch.exchange+". It supports only the last "+a.exchangeMaxHistoryAge+" days.."}):this.startImport(this.config).then((function(e){t.$store.dispatch("imports/addImport",e.data),t.$router.push({path:"/data/importer/import/".concat(e.data.id)})})).catch((function(e){console.error(e),t.$q.notify({message:"An error occured while trying to start the import!",color:"negative"})}))}}}},j=H,D=Object(d["a"])(j,n,s,!1,null,null,null);e["default"]=D.exports},be78:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-select",{attrs:{dense:"",label:"Exchange",hint:"Pick an exchange",options:t.exchangeList,"emit-value":"","map-options":""},model:{value:t.exchange,callback:function(e){t.exchange=e},expression:"exchange"}})},s=[],r=(a("f751"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("2ef0")),i=a.n(r),o={props:["onlyTradable","onlyImportable"],data:function(){return{exchange:"binance"}},created:function(){this.emitExchange()},computed:{exchangeList:function(){return i.a.map(Object.keys(this.exchanges),(function(t,e){return{value:t,label:t}}))},exchanges:function(){var t=Object.assign({},this.$store.state.config.exchanges);return!i.a.isEmpty(t)&&(this.onlyTradable&&i.a.each(t,(function(e,a){e.tradable||delete t[a]})),this.onlyImportable&&i.a.each(t,(function(e,a){e.importable||delete t[a]})),t)}},watch:{exchanges:function(){this.emitExchange()},exchange:function(){this.emitExchange()}},methods:{emitExchange:function(){this.$emit("exchange",this.exchange)}}},c=o,l=a("2877"),u=Object(l["a"])(c,n,s,!1,null,null,null);e["a"]=u.exports}}]);